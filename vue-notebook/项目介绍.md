# 环境准备
## 安装
Vue环境
`npm install -g @vue/cli`

初始化服务
`npm install -g @vue/cli-init`

### 控制服务
`npm install -g @vue/cli-service-global`

## Eslint修改
修改文件 `.eslintrc.js` 中的 `rules` 规则
允许使用首行空格, 函数前空格
```js
  rules: {
    // allow async-await
    'generator-star-spacing': 'off',
    // allow debugger during development
    'no-debugger': process.env.NODE_ENV === 'production' ? 'error' : 'off',
    'indent': ['off', 2],
    'space-before-function-paren': 0,
  }
```

## 启动项目
使用UI管理项目
`vue ui`

命令行初始化项目
项目名不能有大写,根据交互提示输入内容或者直接回车默认初始化项目
`vue init webpack vue-example`

### 安装项目依赖
到项目路径下,执行
`cnpm install`

### 运行项目
在UI管理界面中启动
或者使用以下命令,具体命令在 `package.json` 中可以看到
`npm run dev`

## 安装第三方插件

1.npm安装,并保存引用在package.json中
`cnpm install vue-router --save`

2.在页面中引用
`import VueRouter from 'vue-router'`

3.使用插件
`Vue.use(VueRouter)`

## 编码
使用.vue文件,结合webpack打包工具,完成文件解析

## 使用vue-cli本地管理器
安装客户端
`npm install -g @vue/cli`
初始化项目,使用webpack打包方式
`vue init webpack my-project`
安装项目依赖
`cnpm intall`
测试运行
`npm run dev`
上线运行
`npm run build`

## 前端路由的使用
路由:
根据不同的请求调到不同的页面
通过ajax请求不同的页面,请求的内容相对于重定向或者转发能够省略更少空间

安装路由插件
`cnpm install vue-router --save`
引入路由插件
`import VueRouter from 'vue-router'`
使用路由插件
`Vue.use(VueRouter)`
初始化路由配置
```
let router = new VueRouter({
	mode: 'history',
	routes:[
	{
		path: '/App2',
		component: App2
	},{
		path: '/App3',
		component: App3
	}]
});
```
引入组件
```
import App2 from "./App2.vue"
import App3 from "./App3.vue"
```
在跟页面中使用路由标签
`<router-view></router-view>`
通过浏览器访问
`http://localhost:8080/#/App2`

## 组件状态
使用vuex管理组件状态
安装
` cnpm install vuex --save`
引入,并使用
`import Vuex from 'vuex'`
`Vue.use(Vuex)`
初始化,并定义参数与方法
```
let store = new Vuex.store({
	//数据状态
	state:{
		totalNumber:0
	},
	//动作方法
	mutations:{
		//增加
		addNumber(state,num){
			state.totalNumber += num
		},
		//减少
		decNumber(state,num){
			state.totalNumber -= num
		}
	}
})
```
全局使用
```
new Vue({
	el: "#app",
	//渲染函数
	render: function(h) {
		return h(App);
	},
	//store属性
	store:store
});
```

## 请求后端
地址[GitHub](https://github.com/axios/axios)

安装
`npm install axios --save`
引用
`import axios from 'axios'`



## 伪造服务器端接口
### 安装
`cnpm install json-server --save`

### 创建文件
在项目根目录下创建`db.json`文件

### 引用
在脚手架工具中引用.新版的在`build/webpack.dev.cof.js`下配置
```
/*----------------jsonServer---------*/
/*引入json-server*/
const jsonServer = require('json-server')
/*搭建一个server*/
const apiServer = jsonServer.create()
/*将db.json关联到server*/
const apiRouter = jsonServer.router('db.json')
const middlewares = jsonServer.defaults()
apiServer.use(middlewares)
apiServer.use(apiRouter)
/*监听端口*/
apiServer.listen(3000, () => {
  console.log('JSON Server is running')
})
```

### 访问数据
请求 `http://localhost:3000`

### 设置代理
修改文件`config/index.js`
/*代理配置表，在这里可以配置特定的请求代理到对应的API接口*/
/* 下面的例子将代理请求 /api/getNewsList  到 http://localhost:3000/getNewsList*/
```
proxyTable: {
  '/api': {
    changeOrigin: true,// 如果接口跨域，需要进行这个参数配置
    target: 'http://localhost:3000',// 接口的域名
    pathRewrite: {
      '^/api': ''//后面可以使重写的新路径，一般不做更改
    }
  }
}
```

### 请求
使用`/api/getNewsList`代替`http://localhost:3000/getNewsList`
```
this.$http.get('/api/getNewsList')
.then((res) => {
    this.newsList = res.data
}, (err) => {
    console.log(err)
})
```

## 注意事项
- 在模块文`.vue`中通过使用`require()`函数构建JSON对象的参数,表示JSON引用的文件在打包时引入项目.比如通过JS引用图片,JS文件
- 组件命名注意规范,不能与html关键字与保留关键字重复

## 生产部署
使用 `npm run build`  构建静态文件
使用 `http-server dist` 运行项目

## 跨域问题
修改 `config/dev.env.js` 添加不同环境下的url信息.
并在 `main.js` 中使用 `axios.defaults.baseURL = process.env.API_HOST` 指定不同的URL
